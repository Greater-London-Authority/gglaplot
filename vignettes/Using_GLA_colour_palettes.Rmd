---
title: "Using GLA colour palettes"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Using GLA colour palettes}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r message=FALSE, warning=FALSE}
library(ggplot2)
library(gglaplot)
```

## GLA colours

The *light* and *dark* themes included in `gglaplot` both come with a set of colours to be used for plot details (axis lines, fonts etc) as well as colours for the data itself. These can be accessed directly as Hex colour code strings from the lists `gla_light` and `gla_dark`.

```{r, out.height=10}
str(gla_light)
```

```{r, out.height=10}
str(gla_dark)
```

## GLA palettes

`gglaplot` includes the `gla_pal()` function which generates different palettes from the built in GLA colours. The parameters need to be set as follows:

### `gla_theme`

This should be set as either "light" or "dark" depending on which theme you're using. If you have already set a theme, this can be left as NULL (the default) and the theme will be picked up automatically.

### `palette_type`

The available palette types are:

* **categorical** - to be used for nominal categorical data - data has categories which don't have a natural ordering.
* **quantitative** - to be used for numerical or ordinal categorical data which has a natural ordering.
* **highlight** - to be used where you want to highlight one (or more) type/category of data against some other context data. E.g. London vs rest of UK.
* **diverging** - to be used for numerical or ordinal categorical data which has a natural ordering that goes through 0.

To get maximum control over which colours are assigned to which values, convert your variables to factors (including numerical data, convert any continues values into categories).

The *categorical*, *muted*, *quantitative* and *diverging* palettes can be seen here:

```{r, fig.width=8, fig.height=12, echo = FALSE}
show_gla_pals(inc_div = TRUE)
```


### `main_colours`

The `main_colours` parameter should include a (collection of) string(s) of one or more colours for your palette. For the different palette types this needs to be:

* categorical - should be a collection of colours matching the number of categories in your data. If none is given then the appropriate number will be selected from the set of GLA colours.
* quantitative - should be one colour for the maximum value of your quantitative scale. Will default to "Mayoral" if none is given.
* highlight - should be one or more colours depending on how many data categories you want to highlight. Will default to "Mayoral" if none is given.
* diverging - should be a collection of two colours for either end of the diverging scale. Will default to c("blue", "green") if none is given.

### `n`

Except for diverging palettes, `n` needs to be set to the number of categories in your data, and `gla_pal` will generate this many colours. 

```{r}
gla_pal(gla_theme = 'light', palette_type = 'categorical', n = 5)
```

```{r}
gla_pal(gla_theme = 'light', palette_type = 'quantitative', main_colours = 'green',
        n = 5)
```

```{r}
gla_pal(gla_theme = 'light', palette_type = 'highlight', 
        main_colours = c("blue", "yellow"), n = 5)
```

As you can see, for the highlighting palette, any remaining colours after the `main_colours` have been used will be filled with the appropriate context colour for that theme

For diverging palettes, `n` needs to be set to how many categories you have on either side of `0`, so you'll end up with `2n` colours.

```{r}
gla_pal(gla_theme = 'light', palette_type = 'diverging', main_colours = c('red','yellow'),
        n = 3)
```

### `muted`

If you need a more muted colour palette for data of a sensitive nature, then set `muted = TRUE` to get a muted colour palette.

The muted palette only contains 4 colours ("blue", "green", "red" and "purple") and isn't available for quantitative or diverging colour palettes.

### `inc0`

This is only relevant for diverging colour palettes, if you want to explicitly include 0  in your colour scale (i.e. have a colour in the middle of the palette that is completely neutral between to two ends of the scale) then set `inc0 = TRUE` and this colour will be included in the middle of the palette - meaning you will end up with `2n + 1` colours in total.

```{r}
gla_pal(gla_theme = 'light', palette_type = 'diverging', main_colours = c('red','yellow'),
        n = 3, inc0 = TRUE)
```

## Using the GLA colours in a plot

The palettes generated by `gla_pal()` can be added to `ggplot` objects like any other palette using `scale_fill_manual()` etc. 

```{r}
my_pal <- gla_pal(gla_theme = 'light', palette_type = 'categorical', n = 2)


plot = ggplot(data = LDNUK, mapping = aes(x = Year, y = GPG, group = location, 
                                   colour = location)) +
  geom_line() +
  scale_colour_manual(values=my_pal)
plot
```



